(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{33:function(e,t,a){"use strict";(function(e){var n=a(47),c=a(36),o=a(35),s=a.n(o),r=a(8);let i,b,l;const d=t=>{const c=new(void 0!==e.env.JEST_WORKER_ID?a(28):a(28).default)(t).setMaxListeners(n.a.database.maxNumberOfListeners);return c.changes({since:"now",live:!0,include_docs:!0}).on("change",()=>{if(void 0!==e.env.JEST_WORKER_ID)return;a(31).default.update(e=>({...e,dbUpdatedAt:Date.now()}))}),c};if(!0===Object(r.a)()){const e=a(31).default,t=a(28).default;b=new t(`${n.a.database.remote}/${s.a.get("loginDb")}`,{skip_setup:!0,live:!0}),i=d(n.a.database.local),window._DB=i,s.a.get("loginDb")===Object(c.a)("---fakeUser")&&e.update(e=>({...e,user:{name:"---fakeUser"},online:!0})),s.a.get("loginDb")&&n.a.features.authEnabled?fetch(n.a.database.remote+"/_session",{credentials:"include"}).then(e=>e.json()).then(t=>{null!==t.userCtx.name&&(e.update(e=>({...e,user:{name:t.userCtx.name}})),o())}):e.update(e=>({...e,online:!1})),window._fakeLogin=()=>{s.a.set("loginDb",Object(c.a)("---fakeUser"),{expires:n.a.database.auth.expireDays}),window.location.href="/course/spanish-from-english/"},window._Login=async(t,a)=>{if(!1===window._test_credentials_correct)throw new Error("Incorrect username or password");if(!0===window._test_credentials_correct)return window._fakeLogin();const o=await(await fetch(n.a.database.remote+"/_session",{method:"post",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:a})})).json();if(o.error){if("unauthorized"===o.error)throw new Error("Username or password is incorrect");throw new Error("Couldn't log in. Please try again later")}e.update(e=>({...e,online:null})),s.a.set("loginDb",Object(c.a)(t),{expires:n.a.database.auth.expireDays}),window.location.reload(!1),window.location.href="/course/spanish-from-english/"},window._Logout=async()=>{try{l&&(await l.cancel(),await fetch(n.a.database.remote+"/_session",{method:"delete"}))}finally{s.a.remove("loginDb"),e.update(e=>({...e,user:null,online:null})),await i.destroy(),window.location.reload(!1)}};const o=()=>{l=i.sync(b).on("complete",(function(){e.update(e=>({...e,online:!0}))})).on("error",(function(){e.update(e=>({...e,online:!1}))}))}}void 0!==e.env.JEST_WORKER_ID&&(i=d(n.a.database.local),i.__reset=async()=>{const e=await i.allDocs();await Promise.all(e.rows.map((function(e){return i.remove(e.id,e.value.rev)})))}),t.a=i}).call(this,a(20))},36:function(e,t,a){"use strict";t.a=e=>"userdb-"+(e=>e.split("").map(e=>e.charCodeAt(0).toString(16)).join(""))(e)},364:function(e,t,a){"use strict";a.r(t);var n=a(0),c=(a(33),a(34)),o=a(29);function s(e){let t;return{c(){t=Object(n.cb)("Log in")},l(e){t=Object(n.q)(e,"Log in")},m(e,a){Object(n.I)(e,t,a)},d(e){e&&Object(n.z)(t)}}}function r(e){let t,a,r,i,b,l,d,u,O,j,f,w;return t=new c.a({props:{dark:!0}}),f=new o.a({props:{href:"/login",$$slots:{default:[s]},$$scope:{ctx:e}}}),{c(){Object(n.t)(t.$$.fragment),a=Object(n.ab)(),r=Object(n.A)("section"),i=Object(n.A)("div"),b=Object(n.A)("h2"),l=Object(n.cb)("Registration successful!"),d=Object(n.ab)(),u=Object(n.A)("p"),O=Object(n.cb)("You can now log in."),j=Object(n.ab)(),Object(n.t)(f.$$.fragment),this.h()},l(e){Object(n.n)(t.$$.fragment,e),a=Object(n.p)(e),r=Object(n.o)(e,"SECTION",{class:!0});var c=Object(n.m)(r);i=Object(n.o)(c,"DIV",{class:!0});var o=Object(n.m)(i);b=Object(n.o)(o,"H2",{class:!0});var s=Object(n.m)(b);l=Object(n.q)(s,"Registration successful!"),s.forEach(n.z),d=Object(n.p)(o),u=Object(n.o)(o,"P",{});var w=Object(n.m)(u);O=Object(n.q)(w,"You can now log in."),w.forEach(n.z),j=Object(n.p)(o),Object(n.n)(f.$$.fragment,o),o.forEach(n.z),c.forEach(n.z),this.h()},h(){Object(n.i)(b,"class","is-size-2"),Object(n.i)(i,"class","container"),Object(n.i)(r,"class","section")},m(e,c){Object(n.M)(t,e,c),Object(n.I)(e,a,c),Object(n.I)(e,r,c),Object(n.g)(r,i),Object(n.g)(i,b),Object(n.g)(b,l),Object(n.g)(i,d),Object(n.g)(i,u),Object(n.g)(u,O),Object(n.g)(i,j),Object(n.M)(f,i,null),w=!0},p(e,[t]){const a={};1&t&&(a.$$scope={dirty:t,ctx:e}),f.$set(a)},i(e){w||(Object(n.eb)(t.$$.fragment,e),Object(n.eb)(f.$$.fragment,e),w=!0)},o(e){Object(n.fb)(t.$$.fragment,e),Object(n.fb)(f.$$.fragment,e),w=!1},d(e){Object(n.x)(t,e),e&&Object(n.z)(a),e&&Object(n.z)(r),Object(n.x)(f)}}}class i extends n.b{constructor(e){super(),Object(n.H)(this,e,null,r,n.V,{})}}t.default=i},62:function(e,t){}}]);